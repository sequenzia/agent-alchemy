{
  "id": "31",
  "subject": "Define adapter file format specification",
  "description": "Create a reference document at `claude/port-tools/skills/plugin-porter/references/adapter-format.md` that defines the markdown-based adapter file format for platform mapping.\n\nThe adapter format must define structured sections for:\n- **Platform metadata**: Name, version, documentation URL\n- **Directory structure**: Plugin directory layout and file naming conventions on the target\n- **Tool name mappings**: Claude Code tool → target equivalent (or `null` for unsupported)\n  - Tools to map: Read, Glob, Grep, Edit, Write, Bash, Task, WebSearch, WebFetch, AskUserQuestion, NotebookEdit, mcp__*\n- **Model tier mappings**: opus/sonnet/haiku → target model identifiers or generic labels\n- **Frontmatter translations**: YAML frontmatter field mappings (name, description, model, tools, skills, user-invocable, etc.)\n- **Hook/lifecycle event mappings**: PreToolUse, PostToolUse, Stop, SessionStart, etc. → target equivalents\n- **Composition mechanism**: How the target handles skill loading / reference injection\n- **Path resolution**: Equivalent of `${CLAUDE_PLUGIN_ROOT}` on the target\n- **Adapter version**: Version field tied to target platform version\n\nUse a well-structured markdown format with clear headers and table/list formats for each mapping type. The format should be machine-parseable by an LLM during conversion.\n\n**Acceptance Criteria:**\n\n_Functional:_\n- [ ] Reference doc defines all 9 mapping sections listed above\n- [ ] Each section has clear field definitions and value formats\n- [ ] Tool mapping section covers all Claude Code tools used in Agent Alchemy\n- [ ] Format is structured enough for an LLM to parse during conversion\n- [ ] Includes example entries showing how to fill out each section\n\n_Edge Cases:_\n- [ ] Documents how to handle `null` (unsupported) mappings\n- [ ] Documents how to handle partial mappings (e.g., tool exists but with limitations)\n- [ ] Includes notes field for adapter authors to document caveats\n\n_Error Handling:_\n- [ ] Documents required vs optional sections (which can be omitted)\n- [ ] Documents default values for missing fields\n\n**Testing Requirements:**\n• Manual: Verify format is comprehensive enough to represent OpenCode's plugin system\n• Manual: Verify format covers all Claude Code constructs used in existing plugins\n\nSource: internal/specs/plugin-porting-SPEC.md Section 5.8, 9.1",
  "activeForm": "Defining adapter file format specification",
  "status": "completed",
  "blocks": [
    "32",
    "36",
    "37",
    "40",
    "42"
  ],
  "blockedBy": [],
  "metadata": {
    "priority": "critical",
    "complexity": "M",
    "source_section": "5.8, 9.1",
    "spec_path": "internal/specs/plugin-porting-SPEC.md",
    "feature_name": "Platform Adapter Framework",
    "task_uid": "internal/specs/plugin-porting-SPEC.md:adapter-framework:format-spec:001",
    "task_group": "plugin-porting",
    "phase": 1
  }
}
